function WriteLocalStorage(a){localStorage.setItem("TimeLog",JSON.stringify(a))}function ReadLocalStorage(){var a=localStorage.getItem("TimeLog");return JSON.parse(a)}function LeadingZero(a){return 9>=a?"0"+a:a}function CurrentTime(){var a=new Date,b=LeadingZero(a.getDate())+". "+LeadingZero(a.getMonth()+1)+". "+a.getFullYear()+" "+LeadingZero(a.getHours())+":"+LeadingZero(a.getMinutes())+":00";return b.toString()}function DuplicateEntry(a){for(var b=ReadLocalStorage(),c="add",d=0;d<b.length;d++)b[d]==a&&(c="skip");return c}function AddLog(){var a=CurrentTime(),b=ReadLocalStorage();"add"==DuplicateEntry(a)&&(b.push(a),WriteLocalStorage(b))}function DeleteEntry(a){var b=ReadLocalStorage();b.splice(a,1);WriteLocalStorage(b);var c=window.location.href;Reload(c)}function EchoTime(){var a=document.getElementsByTagName("body")[0],b=window.location.href,c=b.replace(/\?openlog/gi,""),d=ReadLocalStorage(),e="<style>";e+=" .sticky {height:100%; position:fixed; width:120px; left:0; top:0; z-index:100; border-top:0;}",e+=" button, span { color:black; font-size:15px; background-color:white; font-family:arial,sans-serif; position:absolute; width:90px; margin-left:20px; }",e+=" #table-data { margin-left:120px; width: 300px; }",e+=" </style>",e+='<div class="sticky">',e+='<span class="btn btn-default" role="button" style="bottom:20px;" onclick="window.scrollTo(0, 0);;">To Top</span>',e+='<button class="btn btn-default" type="submit" style="top:120px;" onClick=DopyData();>Copy data</button>',e+='<button class="btn btn-default" type="submit" style="top:120px;" onClick=Reload(\''+c+"');>Close</button>",e+='<button class="btn btn-default" type="submit" style="top:220px;" onClick=\'ClearTime();\'>Clear All</button>',e+='<span class="btn btn-default" role="button" style="top:20px;" onclick="window.scrollTo(0, document.body.scrollHeight);">To Bottom</span>',e+="</div>";var f='<div id="table-data"><table class="table table-bordered table-condensed table-striped" border="1">';if(null!=d)for(var g=0;g<d.length;g++)f+="<tr>",f+="<td style='padding: 0 2px;'>"+(g+1)+".</td>",f+="<td title='Select All => copy&paste to Excel!' style='padding: 0 2px;'>"+d[g]+"</td>",f+="<td style='padding: 0 2px;' title='Delete current entry!'> <div style='padding: 0 10px;' onclick='DeleteEntry("+g+");'>&#10006;</div> </td>",f+="</tr>";f+="</table></div>",a.innerHTML=e+f}function Reload(a){t1=window.setTimeout(function(){window.location.href=a},500)}function ClearTime(){localStorage.removeItem("TimeLog"),console.log("Clear DATA"),document.getElementById("table-data").innerHTML='<div class="alert alert-danger" role="alert">Close window/tab to avoid further logging!</div>'}function TimeLogger(){var a=window.location.href;if(""!=a)if(a.search(/openlog/gi)>=6)EchoTime();else{if(null===localStorage.getItem("TimeLog")){var b=[];WriteLocalStorage(b)}AddLog(),document.write('<div style="position:fixed;bottom: 0;right:0;"><a href="'+a+'?openlog" target="_self" style="color:white;background-color:grey;padding:3px 6px;z-index:100;text-decoration:none;border-top-left-radius:3px;">Open Log</a>'),document.body.addEventListener("click",function(){AddLog()},!1),document.body.addEventListener("keypress",function(){AddLog()},!1);var c=document.getElementsByTagName("body")[0];c.onfocus=function(){AddLog()},c.onscroll=function(){AddLog()}}else console.log("No URL")}TimeLogger();